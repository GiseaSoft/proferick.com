function CodeEditor(e,t){const r=this;this.id=e,this.name=t,this.code_editor={},this.sectionParent={},this.editorTabset={},this.editorTabs={},this.editorDisplay={},this.editorWindows={},this.init=()=>{r.code_editor=document.querySelector(`#editor_${e}.editor`),r.sectionParent=r.code_editor.parentElement,r.editorTabset=r.code_editor.querySelector(".editor_tabset"),r.editorTabs=r.editorTabset.querySelectorAll("li"),r.editorDisplay=r.code_editor.querySelector(".editor_display"),r.editorWindows=r.editorDisplay.querySelectorAll(".editor_window");r.editorTabset.addEventListener("click",(e=>{const t=e.target.closest("li");if(!t)return;const i=t.querySelector("span").getAttribute("data-target").replace("#editor_window-","");r.activateTab(i,false,true)})),r.dragTabset(),r.onStart()},this.dragTabset=()=>{let e,t,i=!1,o=!1;r.editorTabset.addEventListener("mousedown",(a=>{i=!0,o=!1,e=a.pageX-r.editorTabset.offsetLeft,t=r.editorTabset.scrollLeft})),r.editorTabset.addEventListener("mouseleave",(()=>{i=!1,r.editorTabset.classList.remove("dragging")})),r.editorTabset.addEventListener("mouseup",(()=>{i=!1,o=!1,r.editorTabset.classList.remove("dragging")})),r.editorTabset.addEventListener("mousemove",(a=>{if(!i)return;a.preventDefault(),o=!0,r.editorTabset.classList.add("dragging");const s=a.pageX-r.editorTabset.offsetLeft-e;r.editorTabset.scrollLeft=t-s}))},this.activateTab=(e,t=!1,i)=>{const o=`#editor_window-${e}`,a=r.code_editor.querySelector(`span[data-target="${o}"]`).closest("li"),s=r.editorDisplay.querySelector(o);s&&(r.editorTabs.forEach((e=>{const i=e.querySelector("span").getAttribute("data-target")===o;e.removeAttribute("aria-selected"),i&&t&&r.sectionParent.scrollIntoView({behavior:"smooth",block:"start"})})),r.editorWindows.forEach((e=>e.setAttribute("hidden",""))),a.setAttribute("aria-selected","true"),s.removeAttribute("hidden"),i&&r.updateUrl(e))},this.onStart=()=>{const e=new URLSearchParams(window.location.search),t=e.get("editor"),i=e.get("tab"),o=r.editorTabs[0].querySelector("span").getAttribute("data-target").replace("#editor_window-","");i&&t===r.name?r.activateTab(i,true):r.activateTab(o)},this.updateUrl=e=>{const t=new URL(window.location);t.searchParams.set("editor",r.name),t.searchParams.set("tab",e),history.replaceState(null,"",t)}}