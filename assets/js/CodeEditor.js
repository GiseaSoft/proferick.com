function CodeEditor(n,c){const t=this;this.id=n,this.name=c,this.code_editor={},this.sectionParent={},this.editorTabset={},this.editorTabs={},this.editorDisplay={},this.editorWindows={},this.init=()=>{t.code_editor=document.querySelector(`#editor_${n}.editor`),t.sectionParent=t.code_editor.parentElement,t.editorTabset=t.code_editor.querySelector(".editor_tabset"),t.editorTabs=t.editorTabset.querySelectorAll("li"),t.editorDisplay=t.code_editor.querySelector(".editor_display"),t.editorWindows=t.editorDisplay.querySelectorAll(".editor_window");const e=!1,r=!0;t.editorTabset.addEventListener("click",i=>{const a=i.target.closest("li");if(!a)return;const s=a.querySelector("span").getAttribute("data-target").replace("#editor_window-","");t.activateTab(s,e,r)}),t.dragTabset(),t.onStart()},this.dragTabset=()=>{let e=!1,r,i,a=!1;t.editorTabset.addEventListener("mousedown",o=>{e=!0,a=!1,r=o.pageX-t.editorTabset.offsetLeft,i=t.editorTabset.scrollLeft}),t.editorTabset.addEventListener("mouseleave",()=>{e=!1,t.editorTabset.classList.remove("dragging")}),t.editorTabset.addEventListener("mouseup",()=>{e=!1,a=!1,t.editorTabset.classList.remove("dragging")}),t.editorTabset.addEventListener("mousemove",o=>{if(!e)return;o.preventDefault(),a=!0,t.editorTabset.classList.add("dragging");const d=o.pageX-t.editorTabset.offsetLeft-r;t.editorTabset.scrollLeft=i-d})},this.activateTab=(e,r=!1,i)=>{const a=`#editor_window-${e}`,o=t.code_editor.querySelector(`span[data-target="${a}"]`).closest("li"),s=t.editorDisplay.querySelector(a);s&&(t.editorTabs.forEach(d=>{const l=d.querySelector("span").getAttribute("data-target")===a;d.removeAttribute("aria-selected"),l&&r&&t.sectionParent.scrollIntoView({behavior:"smooth",block:"start"})}),t.editorWindows.forEach(d=>d.setAttribute("hidden","")),o.setAttribute("aria-selected","true"),s.removeAttribute("hidden"),i&&t.updateUrl(e))},this.onStart=()=>{const e=new URLSearchParams(window.location.search),r=e.get("editor"),i=e.get("tab"),a=!0,s=t.editorTabs[0].querySelector("span").getAttribute("data-target").replace("#editor_window-","");i&&r===t.name?t.activateTab(i,a):t.activateTab(s)},this.updateUrl=e=>{const r=new URL(window.location);r.searchParams.set("editor",t.name),r.searchParams.set("tab",e),history.replaceState(null,"",r)}}
