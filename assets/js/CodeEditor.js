function CodeEditor(s){const t=this;this.id=s,this.code_editor={},this.sectionParent={},this.editorTabset={},this.editorTabs={},this.editorDisplay={},this.editorWindows={},this.init=()=>{t.code_editor=document.querySelector(`#${s}.editor`),t.sectionParent=t.code_editor.closest("section"),t.editorTabset=t.code_editor.querySelector(".editor_tabset"),t.editorTabs=t.editorTabset.querySelectorAll("li"),t.editorDisplay=t.code_editor.querySelector(".editor_display"),t.editorWindows=t.editorDisplay.querySelectorAll(".editor_window");const e=!1,i=!0;t.editorTabset.addEventListener("click",o=>{const r=o.target.closest("li");if(!r)return;const a=r.querySelector("span").getAttribute("data-target").replace("#editor_window-","");t.activateTab(a,e,i)}),t.setupDraggable(),t.onStart()},this.setupDraggable=()=>{let e=!1,i,o;t.editorTabset.addEventListener("mousedown",r=>{e=!0,i=r.pageX-t.editorTabset.offsetLeft,o=t.editorTabset.scrollLeft}),t.editorTabset.addEventListener("mouseleave",()=>{e=!1,t.editorTabset.classList.remove("dragging")}),t.editorTabset.addEventListener("mouseup",()=>{e=!1,t.editorTabset.classList.remove("dragging")}),t.editorTabset.addEventListener("mousemove",r=>{if(!e)return;r.preventDefault(),t.editorTabset.classList.add("dragging");const a=r.pageX-t.editorTabset.offsetLeft-i;t.editorTabset.scrollLeft=o-a})},this.activateTab=(e,i=!1,o)=>{const r=`#editor_window-${e}`,d=t.code_editor.querySelector(`span[data-target="${r}"]`).closest("li"),a=t.editorDisplay.querySelector(r);a&&(t.editorTabs.forEach(c=>{const n=c.querySelector("span").getAttribute("data-target")===r;c.removeAttribute("aria-selected"),n&&i&&t.sectionParent.scrollIntoView({behavior:"smooth",block:"start"})}),t.editorWindows.forEach(c=>c.setAttribute("hidden","")),d.setAttribute("aria-selected","true"),a.removeAttribute("hidden"),o&&t.updateUrl(e))},this.onStart=()=>{const e=new URLSearchParams(window.location.search),i=e.get("editor"),o=e.get("tab"),r=!0,a=t.editorTabs[0].querySelector("span").getAttribute("data-target").replace("#editor_window-","");o&&i===t.id?t.activateTab(o,r):t.activateTab(a)},this.updateUrl=e=>{const i=new URL(window.location);i.searchParams.set("editor",t.id),i.searchParams.set("tab",e),history.replaceState(null,"",i)}}let editors=document.querySelectorAll(".editor");editors.forEach(s=>{const t=s.getAttribute("id");new CodeEditor(t).init()});
