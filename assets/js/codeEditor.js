function CodeEditor(d){this.id=d,this.code_editor={},this.editorTabset={},this.editorTabs={},this.editorDisplay={},this.editorWindows={},this.init=()=>{this.code_editor=document.querySelector(`#${d}.editor`),this.editorTabset=this.code_editor.querySelector(".editor_tabset"),this.editorTabs=this.editorTabset.querySelectorAll("li"),this.editorDisplay=this.code_editor.querySelector(".editor_display"),this.editorWindows=this.editorDisplay.querySelectorAll(".editor_window");const t=!1,e=!0;this.editorTabset.addEventListener("click",s=>{const i=s.target.closest("li");if(!i)return;const r=i.querySelector("span").getAttribute("data-target").replace("#editor_window-","");this.activateTab(r,t,e)}),this.setupDraggable(),this.onStart()},this.setupDraggable=()=>{let t=!1,e,s;this.editorTabset.addEventListener("mousedown",i=>{t=!0,e=i.pageX-this.editorTabset.offsetLeft,s=this.editorTabset.scrollLeft}),this.editorTabset.addEventListener("mouseleave",()=>{t=!1,this.editorTabset.classList.remove("dragging")}),this.editorTabset.addEventListener("mouseup",()=>{t=!1,this.editorTabset.classList.remove("dragging")}),this.editorTabset.addEventListener("mousemove",i=>{if(!t)return;i.preventDefault(),this.editorTabset.classList.add("dragging");const r=i.pageX-this.editorTabset.offsetLeft-e;this.editorTabset.scrollLeft=s-r})},this.activateTab=(t,e=!1,s=!1)=>{const i=`#editor_window-${t}`,a=this.code_editor.querySelector(`span[data-target="${i}"]`).closest("li"),r=this.editorDisplay.querySelector(i);r&&(this.editorTabs.forEach(o=>{const c=o.querySelector("span").getAttribute("data-target")===i;o.removeAttribute("aria-selected"),c&&e&&this.code_editor.scrollIntoView({behavior:"smooth",block:"start"})}),this.editorWindows.forEach(o=>o.setAttribute("hidden","")),a.setAttribute("aria-selected","true"),r.removeAttribute("hidden"))},this.onStart=()=>{if(!window.location.search)return;const t=new URLSearchParams(window.location.search),e=t.get("tabset"),s=t.get("tab"),i=!0,r=this.editorTabs[0].querySelector("span").getAttribute("data-target").replace("#editor_window-","");s&&e===this.id?this.activateTab(s,i):this.activateTab(r)},this.updateUrl=t=>{const e=new URL(window.location);e.searchParams.set("tabset",this.id),e.searchParams.set("tab",t),history.replaceState(null,"",e)}}document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".editor").forEach(t=>{const e=t.getAttribute("id");new CodeEditor(e).init()})});
