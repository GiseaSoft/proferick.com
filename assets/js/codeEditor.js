function CodeEditor(c){const t=this;this.id=c,this.code_editor={},this.editorTabset={},this.editorTabs={},this.editorDisplay={},this.editorWindows={},this.init=()=>{t.code_editor=document.querySelector(`#${c}.editor`),t.editorTabset=t.code_editor.querySelector(".editor_tabset"),t.editorTabs=t.editorTabset.querySelectorAll("li"),t.editorDisplay=t.code_editor.querySelector(".editor_display"),t.editorWindows=t.editorDisplay.querySelectorAll(".editor_window");const e=!1,r=!0;t.editorTabset.addEventListener("click",o=>{const a=o.target.closest("li");if(!a)return;const i=a.querySelector("span").getAttribute("data-target").replace("#editor_window-","");t.activateTab(i,e,r)}),t.setupDraggable(),t.onStart()},this.setupDraggable=()=>{let e=!1,r,o;t.editorTabset.addEventListener("mousedown",a=>{e=!0,r=a.pageX-t.editorTabset.offsetLeft,o=t.editorTabset.scrollLeft}),t.editorTabset.addEventListener("mouseleave",()=>{e=!1,t.editorTabset.classList.remove("dragging")}),t.editorTabset.addEventListener("mouseup",()=>{e=!1,t.editorTabset.classList.remove("dragging")}),t.editorTabset.addEventListener("mousemove",a=>{if(!e)return;a.preventDefault(),t.editorTabset.classList.add("dragging");const i=a.pageX-t.editorTabset.offsetLeft-r;t.editorTabset.scrollLeft=o-i})},this.activateTab=(e,r=!1,o=!1)=>{const a=`#editor_window-${e}`,s=t.code_editor.querySelector(`span[data-target="${a}"]`).closest("li"),i=t.editorDisplay.querySelector(a);i&&(t.editorTabs.forEach(d=>{const n=d.querySelector("span").getAttribute("data-target")===a;d.removeAttribute("aria-selected"),n&&r&&t.code_editor.scrollIntoView({behavior:"smooth",block:"start"})}),t.editorWindows.forEach(d=>d.setAttribute("hidden","")),s.setAttribute("aria-selected","true"),i.removeAttribute("hidden"))},this.onStart=()=>{if(!window.location.search)return;const e=new URLSearchParams(window.location.search),r=e.get("tabset"),o=e.get("tab"),a=!0,i=t.editorTabs[0].querySelector("span").getAttribute("data-target").replace("#editor_window-","");o&&r===t.id?t.activateTab(o,a):t.activateTab(i)},this.updateUrl=e=>{const r=new URL(window.location);r.searchParams.set("tabset",t.id),r.searchParams.set("tab",e),history.replaceState(null,"",r)}}document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".editor").forEach(t=>{const e=t.getAttribute("id");new CodeEditor(e).init()})});
