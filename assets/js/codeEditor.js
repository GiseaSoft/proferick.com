function CodeEditor(n,c){const t=this;this.id=n,this.name=c,this.code_editor=document.querySelector(`#editor_${n}.editor`),this.sectionParent=t.code_editor.parentElement,this.editorTabset=t.code_editor.querySelector(".editor_tabset"),this.editorTabs=t.editorTabset.querySelectorAll("li"),this.editorDisplay=t.code_editor.querySelector(".editor_display"),this.editorWindows=t.editorDisplay.querySelectorAll(".editor_window"),this.init=()=>{t.editorTabset.addEventListener("click",i=>{const r=i.target.closest("li");if(!r)return;const s=r.querySelector("span").getAttribute("data-target").replace("#editor_window-","");t.activateTab(s,!1,!0)}),t.dragTabset(),t.onStart()},this.dragTabset=()=>{let e=!1,a,i,r=!1;t.editorTabset.addEventListener("mousedown",o=>{e=!0,r=!1,a=o.pageX-t.editorTabset.offsetLeft,i=t.editorTabset.scrollLeft}),t.editorTabset.addEventListener("mouseleave",()=>{e=!1,t.editorTabset.classList.remove("dragging")}),t.editorTabset.addEventListener("mouseup",()=>{e=!1,r=!1,t.editorTabset.classList.remove("dragging")}),t.editorTabset.addEventListener("mousemove",o=>{if(!e)return;o.preventDefault(),r=!0,t.editorTabset.classList.add("dragging");const d=o.pageX-t.editorTabset.offsetLeft-a;t.editorTabset.scrollLeft=i-d})},this.activateTab=(e,a=!1,i)=>{const r=`#editor_window-${e}`,o=t.code_editor.querySelector(`span[data-target="${r}"]`).closest("li"),s=t.editorDisplay.querySelector(r);s&&(t.editorTabs.forEach(d=>{const l=d.querySelector("span").getAttribute("data-target")===r;d.removeAttribute("aria-selected"),l&&a&&t.sectionParent.scrollIntoView({behavior:"smooth",block:"start"})}),t.editorWindows.forEach(d=>d.setAttribute("hidden","")),o.setAttribute("aria-selected","true"),s.removeAttribute("hidden"),i&&t.updateUrl(e))},this.onStart=()=>{const e=new URLSearchParams(window.location.search),a=e.get("editor"),i=e.get("tab"),r=!0,s=t.editorTabs[0].querySelector("span").getAttribute("data-target").replace("#editor_window-","");i&&a===t.name?t.activateTab(i,r):t.activateTab(s)},this.updateUrl=e=>{const a=new URL(window.location);a.searchParams.set("editor",t.name),a.searchParams.set("tab",e),history.replaceState(null,"",a)},document.addEventListener("DOMContentLoaded",t.init)}
