function CodeEditor(s){const t=this;this.id=s,this.code_editor={},this.editorTabset={},this.editorTabs={},this.editorDisplay={},this.editorWindows={},this.init=()=>{t.code_editor=document.querySelector(`#${s}.editor`),t.editorTabset=t.code_editor.querySelector(".editor_tabset"),t.editorTabs=t.editorTabset.querySelectorAll("li"),t.editorDisplay=t.code_editor.querySelector(".editor_display"),t.editorWindows=t.editorDisplay.querySelectorAll(".editor_window");const e=!1,a=!0;t.editorTabset.addEventListener("click",i=>{const r=i.target.closest("li");if(!r)return;const o=r.querySelector("span").getAttribute("data-target").replace("#editor_window-","");t.activateTab(o,e,a)}),t.setupDraggable(),t.onStart()},this.setupDraggable=()=>{let e=!1,a,i;t.editorTabset.addEventListener("mousedown",r=>{e=!0,a=r.pageX-t.editorTabset.offsetLeft,i=t.editorTabset.scrollLeft}),t.editorTabset.addEventListener("mouseleave",()=>{e=!1,t.editorTabset.classList.remove("dragging")}),t.editorTabset.addEventListener("mouseup",()=>{e=!1,t.editorTabset.classList.remove("dragging")}),t.editorTabset.addEventListener("mousemove",r=>{if(!e)return;r.preventDefault(),t.editorTabset.classList.add("dragging");const o=r.pageX-t.editorTabset.offsetLeft-a;t.editorTabset.scrollLeft=i-o})},this.activateTab=(e,a=!1,i=!1)=>{const r=`#editor_window-${e}`,d=t.code_editor.querySelector(`span[data-target="${r}"]`).closest("li"),o=t.editorDisplay.querySelector(r);o&&(t.editorTabs.forEach(c=>{const n=c.querySelector("span").getAttribute("data-target")===r;c.removeAttribute("aria-selected"),n&&a&&t.code_editor.scrollIntoView({behavior:"smooth",block:"start"})}),t.editorWindows.forEach(c=>c.setAttribute("hidden","")),d.setAttribute("aria-selected","true"),o.removeAttribute("hidden"),i&&t.updateUrl(e))},this.onStart=()=>{if(!window.location.search)return;const e=new URLSearchParams(window.location.search),a=e.get("tabset"),i=e.get("tab"),r=!0,o=t.editorTabs[0].querySelector("span").getAttribute("data-target").replace("#editor_window-","");i&&a===t.id?t.activateTab(i,r):t.activateTab(o)},this.updateUrl=e=>{const a=new URL(window.location);a.searchParams.set("tabset",t.id),a.searchParams.set("tab",e),history.replaceState(null,"",a)}}let editors=document.querySelectorAll(".editor");editors.forEach(s=>{const t=s.getAttribute("id");new CodeEditor(t).init()});
